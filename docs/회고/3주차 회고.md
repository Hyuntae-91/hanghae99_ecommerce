# 3주차 회고

## 배운 점
### 내가 선택한 시나리오와 도메인 모델링 방향
- 이커머스 시스템을 선택하였고, 도메인은 각각의 책임을 가지고 확장이 가능한 설계를 지향하며 모델링을 진행하였음
- 최초에 EDR 설계를 최대한 깔끔하게 한다고 하였으나, 개발을 진행하며 설계가 조금씩 변화하는 점이 많았음
  - Q&A와 멘토링을 받으면서 부족한 부분이 느껴졌고, 그에 따라 설계를 보강하다보니 발생

### 클린 아키텍처 설계를 하며 어려웠던 점과 그 이유
- 일단 (클린, 헥사고날 등등..) 아키덱처라는 개념 자체가 생소했기 때문에 개념을 이해하는게 어려웠음
- 그동안 Controller - Service - Repository 만 사용해왔기 때문에 이번 설계의 구조가 머리속에 자리잡는데 시간이 걸림
  - 이번 설계 구조는 Interface - Facade(Optional) - Domain - Infrastructure 로 구분되어지고, 클린한 설계를 하기 위해, Domain 이 중심이 되어 있음 
  - 방향을 표시하자면 다음과 같음 Interface -> Facade(Optional) -> Domain <- Infrastructure
    
### 계층을 나누는 데 어려움을 느낀 부분은? OR 유즈케이스/도메인/인터페이스 간 경계를 나눌 때 고민한 지점은?
- Facade 라는 개념을 처음 들었고, 이해하는데 까지 시간이 걸렸고, 필요성에 대해서도 계속 고민하였음
- Facade 계층을 굳이 둘 필요가 없다면 (단순 조회라던지..) 생략해도 된다는 개념을 적립하는 부분이 어려웠음 


### 비즈니스 로직 구현에서 고려한 설계 포인트
- 비즈니스로직을 최대한 Service 코드에서 제외하고, Domain 영역으로 옮기려고 노력하였음
  - 이렇게 진행하므로써, 유닛테스트를 하기 더욱 편한 구조가 되었음
- DTO 간의 변형 (ex. JPA Entity -> Service DTO) 코드를 비즈니스 영역으로 봐야할지? 아니면 도매인의 책임으로 분류해야할지?
  - MapStruct 라는 라이브러리 존재 확인 - 사용을 하기 위해서는 코드적으로 생각할 부분이 많기에, 더 익숙해질 필요성이 있다. (기존 Bean 주입과 충돌같은 부분)
  - 일단은 Domain 내부에서 최대한 from 같은 메소드를 구현해서 도메인의 책임으로 넘기려고 노력함
  - 하지만 java 코드에 아직 덜 익숙해서 그런지, 옮겨지지 않은 부분도 존재 할 수 있음

### 어떻게 책임을 분리했나요? (외부 의존성(DB, 외부 API 등)을 어떻게 분리하고 추상화했나요?)
- 외부 API 호출은 Infrastructure 레벨에 구현을 하고, Event 로 등록
- Facade 레벨에서 비즈니스로직을 수행한 뒤에, event 를 발행하여 동작시키도록 구현

### 단위 테스트를 설계하며 배운 점
- Mock / Stub 이 매우 중요한 개념
- 지금까지 Mock / Stub 은 외부 api 호출이나, DB 호출부만 내가 원하는대로 수정하고 응답받도록만 한 뒤에, 통합테스트만 진행해왔는데, 정확하게 유닛테스트의 개념을 잡음
- 하나의 책임만 테스트한다.

### Mock 객체를 어떤 방식으로 활용했나요?
- 유닛테스트를 진행 할 때, 최대한 테스트 진행하는 함수만 테스트하고, 타고 들어가는 로직은 mock 시켜서 흐름만 테스트 가능하도록 활용

### 이번 과제를 통해 느낀 ‘아키텍처 설계의 가치’
- 아직까지는 엄청나게 좋아졌다 라는걸 잘 모르겠음. 
- Facade 개념은 확실히 좋은것 같음
- 일반적인 Controller - Service - Repository 에 facade 추가하면 비슷한 느낌이지 않을까 생각하긴 함


### 설계 후 구현해보니 느낀 점은?
- 현업에서는 상사가 항상 설계를 담당해와서 직접 설계를 할 일이 없었는데, 설계가 얼마나 치열이 고민해야하는 부분인지 체감함
- 설계 단계에서 빡빡하게 설계를 하면 구현이 한결 편해지는걸 알 수 있었음
- 이번에는 클래스 다이어그램을 작성하지 못 하였는데, 이 과정이 끝나면 콘서트 예약 관련 내용도 구현을 시작하여 클래스 다이어그램 부분도 적용하고자 노력해야겠음

### 앞으로 어떤 설계 습관을 가져가고 싶어졌나요?
- 확장가능하고, 문서만 봐도 어떤 구조인지 파악가능하며, 구현시 최대한 변동이 없는 빡빡한 설계


## KPT
### Keep
- 과제 마무리 어떻게든 해내서 제출까지 마무리했다.. 다음주도 과제 제출을 목표로..

### Problem
- 중간중간 설계가 변동되어서 절대적인 시간이 부족했다.
- 결국 금요일은 한숨도 못자고 출근을 해서 회사에서 너무 힘들었다..
- 날샘을 피하기 위해 저번주 금, 토, 일요일에 시간을 내서 발제를 읽고 사전 파악을 하고 발빠르게 움직였으나, 실패하였다. 

### Try
- 이번주는 주말을 더 빡빡하게 활용하여, 12시 넘어서 자거나 날밤을까는 일은 없도록 하자..